apiVersion: datadog.upbound.io/v1alpha1
kind: DashboardJSON
metadata:
  name: datadog-in-cdk8s-dashboard-c8b4f2ee
spec:
  forProvider:
    dashboard:
      layout_type: ordered
      notify_list: []
      reflow_type: fixed
      template_variables: []
      title: jackjack-cdk8s-demo Basic Observability Bundle Dashboard for cartservice
      widgets:
        - definition:
            legend_columns:
              - avg
              - min
              - max
              - value
              - sum
            legend_layout: auto
            markers:
              - display_type: ok dashed
                value: 99 < y < 100
              - display_type: warning dashed
                value: 90 < y < 99
              - display_type: error dashed
                value: 0 < y < 90
            requests:
              - display_type: line
                formulas:
                  - formula: 100 * (query1 - query2) / query1
                queries:
                  - data_source: metrics
                    name: query1
                    query: sum:trace.opentelemetry.server.hits.by_http_status{env,p:0, service,cartservice:1}.by_count()
                  - data_source: metrics
                    name: query2
                    query: sum:trace.opentelemetry.server.hits.by_http_status{env,p:0, http.status_code,400:1, service,cartservice:2}.by_count()
                response_format: timeseries
                style:
                  line_type: solid
                  line_width: normal
                  palette: dog_classic
            show_legend: true
            time: {}
            title: Success Rate
            title_align: left
            title_size: 16
            type: timeseries
          layout:
            height: 2
            width: 4
            x: 0
            "y": 0
        - definition:
            legend_columns:
              - avg
              - min
              - max
              - value
              - sum
            legend_layout: auto
            markers: []
            requests:
              - display_type: line
                formulas: []
                queries:
                  - data_source: metrics
                    name: query1
                    query: sum:trace.opentelemetry.server.hits.by_http_status{env,p:0, service,cartservice:1}.by_count()
                response_format: timeseries
                style:
                  line_type: solid
                  line_width: normal
                  palette: dog_classic
            show_legend: true
            time: {}
            title: Traffic
            title_align: left
            title_size: 16
            type: timeseries
          layout:
            height: 0
            width: 4
            x: 4
            "y": 0
  providerConfigRef:
    name: datadog-provider-config
